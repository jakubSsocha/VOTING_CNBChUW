CREATE DATABASE glosowanieCNBCh
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;


CREATE TABLE users (
id INT AUTO_INCREMENT,
username VARCHAR(80) CHARACTER SET utf8mb4 NOT NULL,
email VARCHAR(80) UNIQUE NOT NULL,
password VARCHAR(30) CHARACTER SET utf8mb4 NOT NULL,
added TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
isNew BIT(1) DEFAULT 1,
isActive BIT(1) DEFAULT 0,
isAdmin BIT(1) DEFAULT 0,
PRIMARY KEY(id)
);

CREATE TABLE votings (
id INT AUTO_INCREMENT,
title VARCHAR(100) CHARACTER SET utf8mb4 NOT NULL,
description TEXT CHARACTER SET utf8mb4 NOT NULL,
created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
closed TIMESTAMP NULL,
isNew BIT(1) DEFAULT 1,
isActive BIT(1) DEFAULT 0,
isClosed BIT(1) DEFAULT 0,
PRIMARY KEY(id)
);

CREATE TABLE results (
id INT AUTO_INCREMENT,
voting_id INT NOT NULL,
user_id INT NOT NULL,
vote VARCHAR(10) CHARACTER SET utf8mb4,
isNew BIT(1) DEFAULT 1,
isActive BIT(1) DEFAULT 0,
created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
modified TIMESTAMP NULL,
PRIMARY KEY (id),
FOREIGN KEY(voting_id) REFERENCES votings(id),
FOREIGN KEY(user_id) REFERENCES users(id)
);
